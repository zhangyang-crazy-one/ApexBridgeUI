<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ApexBridge - AI协作平台</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- Google Fonts - 极端字重对比 + 中文支持 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,100;12..96,900&family=Crimson+Pro:wght@300;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@300;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Core Styles -->
    <link rel="stylesheet" href="/src/styles/main.css" />
    <link rel="stylesheet" href="/src/styles/themes.css" />
    <link rel="stylesheet" href="/src/styles/button-enhancements.css" />
    <link rel="stylesheet" href="/src/styles/choreographed-animations.css" />
    <link rel="stylesheet" href="/src/styles/dialog-enhancements.css" />

    <!-- Component Styles -->
    <link rel="stylesheet" href="/src/styles/chat.css" />
    <link rel="stylesheet" href="/src/styles/message-list.css" />
    <link rel="stylesheet" href="/src/styles/input-area.css" />
    <link rel="stylesheet" href="/src/styles/avatar.css" />
    <link rel="stylesheet" href="/src/styles/connection-status.css" />
    <link rel="stylesheet" href="/src/styles/attachment-preview.css" />
    <link rel="stylesheet" href="/src/styles/notification.css" />
    <link rel="stylesheet" href="/src/styles/modal.css" />
    <link rel="stylesheet" href="/src/styles/custom-modal.css" />

    <!-- Renderer Styles -->
    <link rel="stylesheet" href="/src/styles/code-renderer.css" />
    <link rel="stylesheet" href="/src/styles/syntax-highlighter.css" />
    <link rel="stylesheet" href="/src/styles/diff-viewer.css" />

    <!-- Media Renderers -->
    <link rel="stylesheet" href="/src/styles/image-renderer.css" />
    <link rel="stylesheet" href="/src/styles/video-renderer.css" />
    <link rel="stylesheet" href="/src/styles/audio-renderer.css" />
    <link rel="stylesheet" href="/src/styles/pdf-renderer.css" />

    <!-- Content Renderers -->
    <link rel="stylesheet" href="/src/styles/latex-renderer.css" />
    <link rel="stylesheet" href="/src/styles/mermaid-renderer.css" />
    <link rel="stylesheet" href="/src/styles/html-renderer.css" />
    <link rel="stylesheet" href="/src/styles/json-renderer.css" />
    <link rel="stylesheet" href="/src/styles/csv-renderer.css" />

    <!-- Syntax Highlighting Renderers (YAML, GraphQL, SQL, XML) -->
    <link rel="stylesheet" href="/src/styles/syntax-renderer.css" />

    <!-- Simple Renderers (Color, URL, Regex, ASCII, Three.js, Diff) -->
    <link rel="stylesheet" href="/src/styles/simple-renderers.css" />

    <!-- Settings & Plugin Styles -->
    <link rel="stylesheet" href="/src/styles/settings.css" />
    <link rel="stylesheet" href="/src/styles/plugin-container.css" />
    <link rel="stylesheet" href="/src/styles/plugin-manager.css" />
    <link rel="stylesheet" href="/src/styles/plugin-store.css" />
  </head>
  <body>
    <!-- Custom Title Bar -->
    <div id="titlebar" class="titlebar" data-tauri-drag-region>
      <div class="titlebar-left">
        <!-- ApexBridge Logo SVG -->
        <div class="titlebar-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="apexbridge-logo">
            <!-- Main Frame: Letter "A" triangle structure -->
            <path class="logo-frame" d="M12 3 L21 21 L17.5 21 L12 9 L6.5 21 L3 21 Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="miter"/>
            <!-- Bridge: Arch connecting both sides -->
            <path class="logo-bridge" d="M7.5 13.5 Q12 10.5 16.5 13.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
            <!-- Bridge Support Points -->
            <circle class="bridge-anchor-left" cx="7.5" cy="13.5" r="1.6" fill="currentColor"/>
            <circle class="bridge-anchor-right" cx="16.5" cy="13.5" r="1.6" fill="currentColor"/>
            <!-- Apex Point -->
            <circle class="apex-point" cx="12" cy="3" r="1.3" fill="currentColor"/>
          </svg>
        </div>
        <span class="titlebar-title">ApexBridge</span>
      </div>
      <div class="titlebar-center">
        <!-- Empty center area -->
      </div>
      <div class="titlebar-right">
        <!-- Canvas Button -->
        <button id="canvas-launcher-btn" class="titlebar-icon-btn" title="Open Canvas (Ctrl+K)">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15.812 4.819c-.33-.341-.312-.877.028-1.207l3.469-3.365c.17-.164.387-.247.603-.247.219 0 .438.085.604.257l-4.704 4.562zm-5.705 8.572c-.07.069-.107.162-.107.255 0 .194.158.354.354.354.089 0 .178-.033.247-.1l.583-.567-.493-.509-.584.567zm4.924-6.552l-1.994 1.933c-1.072 1.039-1.619 2.046-2.124 3.451l.881.909c1.419-.461 2.442-.976 3.514-2.016l1.994-1.934-2.271-2.343zm5.816-5.958l-5.137 4.982 2.586 2.671 5.138-4.98c.377-.366.566-.851.566-1.337 0-1.624-1.968-2.486-3.153-1.336zm-11.847 12.119h-4v1h4v-1zm9-1.35v1.893c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362v-20h12.629l2.062-2h-16.691v24h10.189c3.163 0 9.811-7.223 9.811-9.614v-4.687l-2 1.951z"/>
          </svg>
        </button>

        <!-- Unified Settings Button -->
        <button id="unified-settings-btn" class="titlebar-icon-btn" title="设置 (Ctrl+,)">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
        </button>

        <!-- Theme Toggle Button -->
        <button id="theme-toggle-btn" class="titlebar-icon-btn" title="Toggle Theme">
          <!-- Icon will be set by ThemeManager -->
        </button>

        <div id="window-controls" class="window-controls">
          <!-- Window control buttons will be injected by window-controls.ts -->
        </div>
      </div>
    </div>

    <!-- Main Application Layout -->
    <div id="app-container" class="app-container">
      <!-- Left Sidebar -->
      <aside id="sidebar-left" class="sidebar sidebar-left">
        <div class="sidebar-header">
          <span>对话列表</span>
          <button class="sidebar-toggle" id="left-sidebar-toggle">‹</button>
        </div>
        <div class="sidebar-content" id="sidebar-left-content">
          <!-- Agent/Group list will be injected by ui.ts -->
        </div>
      </aside>

      <!-- Resize Handle for Left Sidebar -->
      <div id="resize-handle-left" class="resize-handle resize-handle-left"></div>

      <!-- Main Content Area -->
      <main id="main-content" class="main-content">
        <!-- Welcome Screen (default view) -->
        <div class="welcome-screen" id="welcome-screen">
          <div class="welcome-header">
            <h1>欢迎使用 ApexBridge</h1>
            <p>连接智能巅峰的尖端融合平台</p>
            <p class="version">Version 1.0.0 - Apex Integration Design System</p>
          </div>

          <div class="features">
            <div class="feature-item">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                </svg>
              </div>
              <div class="feature-content">
                <h3>智能对话</h3>
                <p>与 AI 进行自然流畅的对话，支持多轮上下文理解和实时响应。先进的语言模型确保每次交互都准确、高效、富有洞察力。</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
              </div>
              <div class="feature-content">
                <h3>协同画布</h3>
                <p>实时代码编辑和协作，支持语法高亮和差异对比功能。与 AI 共同编写、审查和优化代码，提升开发效率。</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                </svg>
              </div>
              <div class="feature-content">
                <h3>智能笔记</h3>
                <p>富文本编辑器，支持从对话中快速保存和管理内容。无缝集成AI助手，让知识管理变得简单高效。</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"/>
                </svg>
              </div>
              <div class="feature-content">
                <h3>插件生态</h3>
                <p>丰富的插件系统，扩展无限可能性和定制功能。通过模块化架构轻松集成各类工具和服务。</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Chat, Canvas, Notes, etc. will be dynamically loaded here -->
      </main>

      <!-- Resize Handle for Right Sidebar -->
      <div id="resize-handle-right" class="resize-handle resize-handle-right"></div>

      <!-- Right Sidebar -->
      <aside id="sidebar-right" class="sidebar sidebar-right">
        <div class="sidebar-header">
          <span>通知与设置</span>
          <button class="sidebar-toggle" id="right-sidebar-toggle">›</button>
        </div>
        <div class="sidebar-content" id="sidebar-right-content">
          <!-- Notifications Section -->
          <div class="notification-section">
            <div class="section-header">
              <h4>通知中心</h4>
              <button class="btn-icon" id="clear-notifications-btn" title="Clear all">
                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"/>
                </svg>
              </button>
            </div>
            <div id="notifications-container" class="notifications-container">
              <div class="empty-notifications">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
                  <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
                </svg>
                <p>No notifications yet</p>
              </div>
            </div>
          </div>

          <!-- Global Settings Section -->
          <!-- Settings section removed - now using unified settings button in header -->
        </div>
      </aside>
    </div>

    <!-- Plugin Container (hidden by default) -->
    <div id="plugin-container" class="plugin-container" style="display: none;">
      <!-- Plugins will be dynamically mounted here -->
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
